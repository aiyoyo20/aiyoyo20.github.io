<!DOCTYPE html>
<html lang="en">

<head>
    
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="generator" content="Hugo 0.93.3" />



<link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/favicon-16x16.png" />
<link rel="manifest" href="https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/site.webmanifest" />
<link rel="mask-icon" href="https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/safari-pinned-tab.svg" color="#8aa2d3" />
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/amzrk2/cdn-stcapi@1/favicons/favicon.ico" />
<meta name="theme-color" content="#ffffff" />


<title>shell_question - AI YOYO</title>


<meta name="author" content="会讲笑话的咸鱼王" />


<meta name="description" content="A minimal Hugo theme with nice theme color." />


<meta name="keywords" content="Linux" />


<meta property="og:title" content="shell_question" />
<meta name="twitter:title" content="shell_question" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/shell_question/" /><meta property="og:description" content="数组作为函数参数的问题 ` #!/bin/bash urlOne=&ldquo;https://raw.githubusercontent.com/ngosang/trackerslist/master/&#34; arrayOne=(&ldquo;trackers_all.txt&rdquo; &ldquo;trackers_all_http.txt&rdquo; &ldquo;trackers_all_https.txt&rdquo; &ldquo;trackers_all_ip.txt&rdquo; &ldquo;trackers_all_udp.txt&rdquo; &ldquo;trackers_all_ws.txt&rdquo; &ldquo;trackers_best.txt&rdquo; &ldquo;trackers_best_ip.txt&rdquo;) function getTracker(){ array=$2 echo ${array[]} for i in ${array[]} do url=&quot;${1}${i}&rdquo; echo &ldquo;wget $url&rdquo; done } getTracker ${urlOne} &ldquo;${arrayOne[]}&rdquo; ` 因为不是只传一个数组，要考虑其他参数的情况，而且数组不一定在最前最后，即尽量不在函数内使用&quot;$@&quot" />
<meta name="twitter:description" content="数组作为函数参数的问题 ` #!/bin/bash urlOne=&ldquo;https://raw.githubusercontent.com/ngosang/trackerslist/master/&#34; arrayOne=(&ldquo;trackers_all.txt&rdquo; &ldquo;trackers_all_http.txt&rdquo; &ldquo;trackers_all_https.txt&rdquo; &ldquo;trackers_all_ip.txt&rdquo; &ldquo;trackers_all_udp.txt&rdquo; &ldquo;trackers_all_ws.txt&rdquo; &ldquo;trackers_best.txt&rdquo; &ldquo;trackers_best_ip.txt&rdquo;) function getTracker(){ array=$2 echo ${array[]} for i in ${array[]} do url=&quot;${1}${i}&rdquo; echo &ldquo;wget $url&rdquo; done } getTracker ${urlOne} &ldquo;${arrayOne[]}&rdquo; ` 因为不是只传一个数组，要考虑其他参数的情况，而且数组不一定在最前最后，即尽量不在函数内使用&quot;$@&quot" /><meta property="og:image" content="/img/og.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="/img/og.png" /><meta property="article:published_time" content="2022-12-26T14:49:14+08:00" /><meta property="article:modified_time" content="2022-12-26T14:49:14+08:00" />


<style>
    @media (prefers-color-scheme: dark) {
        body[data-theme='auto'] img {
            filter: brightness(60%);
        }
    }

    body[data-theme='dark'] img {
        filter: brightness(60%);
    }
</style>




<link rel="stylesheet" href="/assets/css/fuji.min.b4a21b5d3eb1d0a51297e31230a65fc25e387843e45ec3a2d9176cd8d163c216d99b9b13a618b28f537c3b559ec8a408183b0fbfad48daddb9befa7d3ef90eed.css" integrity="sha512-tKIbXT6x0KUSl&#43;MSMKZfwl44eEPkXsOi2Rds2NFjwhbZm5sTphiyj1N8O1WeyKQIGDsPv61I2t25vvp9PvkO7Q==" />








</head>

<body
  data-theme="auto"
  data-theme-auto='true'
  >
    <script data-cfasync="false">
  
  var fujiThemeData = localStorage.getItem('fuji_data-theme');
  
  if (!fujiThemeData) {
    localStorage.setItem('fuji_data-theme', 'auto');
  } else {
    
    if (fujiThemeData !== 'auto') {
      document.body.setAttribute('data-theme', fujiThemeData === 'dark' ? 'dark' : 'light');
    }
  }
</script>

    <header>
    <div class="container-lg clearfix">
        <div class="col-12 header">
            <a class="title-main" href="/">AI YOYO</a>
            
            <span class="title-sub">个人日常学习、生活分享</span>
            
        </div>
    </div>
</header>

    <main>
        <div class="container-lg clearfix">
            
            <div class="col-12 col-md-9 float-left content">
                
<article>
    
    <h2 class="post-item post-title">
        <a href="/post/shell_question/">shell_question</a>
    </h2>
    <div class="post-item post-meta">
        <span><i class="iconfont icon-today-sharp"></i>&nbsp;2022-12-26</span>

<span><i class="iconfont icon-file-tray-sharp"></i>&nbsp;1402 words</span>

<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href="/tags/linux">Linux</a>&nbsp;</span>

    </div>
    
    <div class="post-content markdown-body">
        <h2 id="数组作为函数参数的问题">数组作为函数参数的问题</h2>
<p>`
#!/bin/bash</p>
<p>urlOne=&ldquo;<a href="https://raw.githubusercontent.com/ngosang/trackerslist/master/%22" target="_blank">https://raw.githubusercontent.com/ngosang/trackerslist/master/"</a>
arrayOne=(&ldquo;trackers_all.txt&rdquo; &ldquo;trackers_all_http.txt&rdquo; &ldquo;trackers_all_https.txt&rdquo; &ldquo;trackers_all_ip.txt&rdquo; &ldquo;trackers_all_udp.txt&rdquo; &ldquo;trackers_all_ws.txt&rdquo; &ldquo;trackers_best.txt&rdquo; &ldquo;trackers_best_ip.txt&rdquo;)</p>
<p>function getTracker(){
array=$2
echo ${array[<em>]}
for i in ${array[</em>]}
do
url=&quot;${1}${i}&rdquo;
echo &ldquo;wget $url&rdquo;
done
}</p>
<p>getTracker ${urlOne} &ldquo;${arrayOne[<em>]}&rdquo;
`
因为不是只传一个数组，要考虑其他参数的情况，而且数组不一定在最前最后，即尽量不在函数内使用&quot;$@&quot;、&quot;@</em>&quot; 接收再切片的方式。</p>
<p>1、传参</p>
<p>如果使用@的方式，无论有没有&quot;&ldquo;数组都会被展开，结果就变成了函数接受参数1和数组里面的每个值作为参数，总参数个数就变成了1+数组长度，如果数组有多个值就会影响到脚本的结果了。</p>
<p>不使用&quot;&ldquo;包裹则不管是<code>@</code>、<code>*</code> 也都会被展开。</p>
<p>只有使用<code>&quot;&quot;</code> 和 <code>*</code> 传递 在函数内才能使用位置参数去接收。</p>
<p>2、函数内部
因为语法限制，无法使用&rdquo;${${}}&ldquo;的方式，所以要使用一个变量去接收再使用。</p>
<p>下面的情况有点迷惑了。</p>
<p>直接输出&rdquo;$2&quot;得到的是一个整体，这个整体按照shell的理念应该是字符串，无论是直接使用变量名、&quot;${name[*]}&quot;、&quot;${name[@]}&ldquo;都能正确的循环，也就排除了会动态转为数组的可能。</p>
<p>单写了一个测试的，对于不管是&rdquo;&quot;、&lsquo;&lsquo;包裹的有空格的字符串，for循环都会根据空格去拆分。</p>
<p>于是猜测是不是会自动识别分隔符，更改了<code>IFS</code>的值，果然遍历就只输出了一个整体，再对字符串中的某些空格改为新的分隔符，的确是根据分隔符来拆分。</p>
<p>但为了整体的统一，还是在读取循环时也使用&rdquo;${name[*]}&ldquo;的方式吧。</p>
<h2 id="sudo-echo-或类似命令串提示权限不够的解决办法">“sudo echo ＞＞”或类似命令串提示权限不够的解决办法</h2>
<p>这是因为重定向符号 “&gt;” 和 “&raquo;” 也是 bash 的命令。sudo 只是让 echo 命令具有了 root 权限，但是没有让 “&gt;” 和 “&raquo;” 命令也具有root 权限，所以 bash 会认为这两个命令都没有写入信息的权限。</p>
<p>解决方法一：
利用 “sh -c” 命令，它可以让 bash 将一个字串作为完整的命令来执行，这样就可以将 sudo 的影响范围扩展到整条命令。具体用法如下：</p>
<pre><code>sudo sh -c 'command line'
sudo sh -c 'echo &quot;114.250.64.34    translate.googleapis.com&quot; &gt;&gt; /etc/hosts'
</code></pre>
<p>解决方法二：
利用管道和 tee 命令，该命令可以从标准输入中读入信息并将其写入标准输出或文件中，具体用法如下：</p>
<pre><code>echo &quot;strings&quot; | sudo tee -a filename
echo &quot;114.250.64.34    translate.googleapis.com&quot; | sudo tee -a /etc/hosts
</code></pre>
<h3 id="读取文件的几种方法">读取文件的几种方法</h3>
<pre><code>while read line
do
    echo $line
done &lt; filename
</code></pre>
<!---->
<pre><code>cat filename | while read line
do
    echo $line
done
</code></pre>
<h4 id="ifs-分隔符cat-逐行读取文件">IFS 分隔符；cat 逐行读取文件</h4>
<pre><code>for line in `cat filename`
do
    echo $line
done
</code></pre>
<p>使用上面的方法读取文件时，当行内有空白符(空格、tab、换行)时就不会按行输出了。</p>
<pre><code class="language-test.txt">a b
1 2
3 4
</code></pre>
<pre><code>for i in `cat test.txt`
do
   echo $i
done
</code></pre>
<!---->
<pre><code>a
b
1
2
3
4
</code></pre>
<p>除了更换之前的 while 方法外，还可以通过指定分隔符来实现。</p>
<pre><code>IFS=$'\n' # 定义分割符
# for i in $(cat file)    # better
# for i in $(&lt;file)       # in bash
for i in `cat file`
do
    echo &quot;$i&quot;
done
</code></pre>
<blockquote>
<p>IFS=&quot;\n&rdquo; # 将字符 n 作为 IFS 的换行符。
IFS=$&quot;\n&quot; # 这里\n确实通过$转化为了换行符，但仅当被解释时（或被执行时）才被转化为换行符;第一个和第二个是等价的
IFS=$&rsquo;\n&rsquo; # 这才是真正的换行符。</p>
</blockquote>
<p>Shell 脚本中有个变量叫 IFS(Internal Field Seprator) ，内部域分隔符。
Shell 的环境变量分为 set, env 两种，其中 set 变量可以通过 export 工具导入到 env 变量中。
其中，set 是显示设置 shell 变量，仅在本 shell 中有效；env 是显示设置用户环境变量 ，仅在当前会话中有效。</p>
<p>IFS 是一种 set 变量，当 shell 处理&quot;命令替换&quot;和&quot;参数替换&quot;时，shell 根据 IFS 的值，默认是 space, tab, newline 来拆解读入的变量，然后对特殊字符进行处理，最后重新组合赋值给该变量.</p>

    </div>
</article>


<div class="license markdown-body">
    <blockquote>
        <p>Unless otherwise noted, the content of this site is licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"
               target="_blank">CC BY-NC-SA 4.0</a>.</p>
    </blockquote>
</div>



            </div>
            <aside class="col-12 col-md-3 float-left sidebar">
    
    <div class="sidebar-item sidebar-pages">
        <h3>Pages</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/archives/">Archives</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
            <li>
                <a href="/search/">Search</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>Links</h3>
        <ul>
            
            <li>
                <a href="https://github.com/dsrkafuu" target="_blank"><span>GitHub</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>Tags</h3>
        <div>
            
            <span>
                <a href="/tags/aria2/">Aria2</a>
            </span>
            
            <span>
                <a href="/tags/chrome/">Chrome</a>
            </span>
            
            <span>
                <a href="/tags/companyquestionset/">CompanyQuestionSet</a>
            </span>
            
            <span>
                <a href="/tags/database/">DataBase</a>
            </span>
            
            <span>
                <a href="/tags/datestructure_algorithm/">DateStructure_Algorithm</a>
            </span>
            
            <span>
                <a href="/tags/docker/">Docker</a>
            </span>
            
            <span>
                <a href="/tags/editor/">Editor</a>
            </span>
            
            <span>
                <a href="/tags/flask/">Flask</a>
            </span>
            
            <span>
                <a href="/tags/frontend/">FrontEnd</a>
            </span>
            
            <span>
                <a href="/tags/git/">Git</a>
            </span>
            
            <span>
                <a href="/tags/images/">images</a>
            </span>
            
            <span>
                <a href="/tags/input_method/">Input_Method</a>
            </span>
            
            <span>
                <a href="/tags/interviewquestions/">InterviewQuestions</a>
            </span>
            
            <span>
                <a href="/tags/linux/">Linux</a>
            </span>
            
            <span>
                <a href="/tags/mongodb/">MongoDB</a>
            </span>
            
            <span>
                <a href="/tags/mysql/">MySQL</a>
            </span>
            
            <span>
                <a href="/tags/neovim/">NeoVim</a>
            </span>
            
            <span>
                <a href="/tags/other/">Other</a>
            </span>
            
            <span>
                <a href="/tags/others/">Others</a>
            </span>
            
            <span>
                <a href="/tags/phone/">Phone</a>
            </span>
            
            <span>
                <a href="/tags/proxy/">Proxy</a>
            </span>
            
            <span>
                <a href="/tags/python/">Python</a>
            </span>
            
            <span>
                <a href="/tags/redis/">Redis</a>
            </span>
            
            <span>
                <a href="/tags/sublime/">Sublime</a>
            </span>
            
            <span>
                <a href="/tags/thought/">Thought</a>
            </span>
            
            <span>
                <a href="/tags/tools/">Tools</a>
            </span>
            
            <span>
                <a href="/tags/vim/">Vim</a>
            </span>
            
            <span>
                <a href="/tags/windows/">Windows</a>
            </span>
            
        </div>
    </div>
    <div class="sidebar-item sidebar-toc">
        <h3>Table of Contents</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#数组作为函数参数的问题">数组作为函数参数的问题</a></li>
    <li><a href="#sudo-echo-或类似命令串提示权限不够的解决办法">“sudo echo ＞＞”或类似命令串提示权限不够的解决办法</a>
      <ul>
        <li><a href="#读取文件的几种方法">读取文件的几种方法</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
</aside>

        </div>
        <div class="btn">
    <div class="btn-menu" id="btn-menu">
        <i class="iconfont icon-grid-sharp"></i>
    </div>
    <div class="btn-toggle-mode">
        <i class="iconfont icon-contrast-sharp"></i>
    </div>
    <div class="btn-scroll-top">
        <i class="iconfont icon-chevron-up-circle-sharp"></i>
    </div>
</div>
<aside class="sidebar-mobile" style="display: none;">
  <div class="sidebar-wrapper">
    
    <div class="sidebar-item sidebar-pages">
        <h3>Pages</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/archives/">Archives</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
            <li>
                <a href="/search/">Search</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>Links</h3>
        <ul>
            
            <li>
                <a href="https://github.com/dsrkafuu" target="_blank"><span>GitHub</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>Tags</h3>
        <div>
            
            <span>
                <a href="/tags/aria2/">Aria2</a>
            </span>
            
            <span>
                <a href="/tags/chrome/">Chrome</a>
            </span>
            
            <span>
                <a href="/tags/companyquestionset/">CompanyQuestionSet</a>
            </span>
            
            <span>
                <a href="/tags/database/">DataBase</a>
            </span>
            
            <span>
                <a href="/tags/datestructure_algorithm/">DateStructure_Algorithm</a>
            </span>
            
            <span>
                <a href="/tags/docker/">Docker</a>
            </span>
            
            <span>
                <a href="/tags/editor/">Editor</a>
            </span>
            
            <span>
                <a href="/tags/flask/">Flask</a>
            </span>
            
            <span>
                <a href="/tags/frontend/">FrontEnd</a>
            </span>
            
            <span>
                <a href="/tags/git/">Git</a>
            </span>
            
            <span>
                <a href="/tags/images/">images</a>
            </span>
            
            <span>
                <a href="/tags/input_method/">Input_Method</a>
            </span>
            
            <span>
                <a href="/tags/interviewquestions/">InterviewQuestions</a>
            </span>
            
            <span>
                <a href="/tags/linux/">Linux</a>
            </span>
            
            <span>
                <a href="/tags/mongodb/">MongoDB</a>
            </span>
            
            <span>
                <a href="/tags/mysql/">MySQL</a>
            </span>
            
            <span>
                <a href="/tags/neovim/">NeoVim</a>
            </span>
            
            <span>
                <a href="/tags/other/">Other</a>
            </span>
            
            <span>
                <a href="/tags/others/">Others</a>
            </span>
            
            <span>
                <a href="/tags/phone/">Phone</a>
            </span>
            
            <span>
                <a href="/tags/proxy/">Proxy</a>
            </span>
            
            <span>
                <a href="/tags/python/">Python</a>
            </span>
            
            <span>
                <a href="/tags/redis/">Redis</a>
            </span>
            
            <span>
                <a href="/tags/sublime/">Sublime</a>
            </span>
            
            <span>
                <a href="/tags/thought/">Thought</a>
            </span>
            
            <span>
                <a href="/tags/tools/">Tools</a>
            </span>
            
            <span>
                <a href="/tags/vim/">Vim</a>
            </span>
            
            <span>
                <a href="/tags/windows/">Windows</a>
            </span>
            
        </div>
    </div>
    
    
    
    <div class="sidebar-item sidebar-toc">
        <h3>Table of Contents</h3>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#数组作为函数参数的问题">数组作为函数参数的问题</a></li>
    <li><a href="#sudo-echo-或类似命令串提示权限不够的解决办法">“sudo echo ＞＞”或类似命令串提示权限不够的解决办法</a>
      <ul>
        <li><a href="#读取文件的几种方法">读取文件的几种方法</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
    
  </div>
</aside>
    </main>

    <footer>
    <div class="container-lg clearfix">
        <div class="col-12 footer">
            
            <span>&copy; 2020-2023
                <a href="/">会讲笑话的咸鱼王</a>
                
                | Powered by <a href="https://github.com/dsrkafuu/hugo-theme-fuji/"
                   target="_blank">Fuji-v2</a> &amp; <a href="https://gohugo.io/"
                                                    target="_blank">Hugo</a> 
            </span>
        </div>
    </div>
</footer>

    
<script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js" integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/components/prism-core.min.js" integrity="sha512-LCKPTo0gtJ74zCNMbWw04ltmujpzSR4oW+fgN+Y1YclhM5ZrHCZQAJE4quEodcI/G122sRhSGU2BsSRUZ2Gu3w==" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-GP4x8UWxWyh4BMbyJGOGneiTbkrWEF5izsVJByzVLodP8CuJH/n936+yQDMJJrOPUHLgyPbLiGw2rXmdvGdXHA==" crossorigin="anonymous"></script>



<script defer src="/assets/js/fuji.min.63d5cea7f1ee8e64c26d4e8c531866bbd7ff11fe457b0d3a4ac05238db02912b502392ba5e887d50456e8d0c755f47d50d5a0202aa58235aa683b276d053bf3c.js" integrity="sha512-Y9XOp/HujmTCbU6MUxhmu9f/Ef5Few06SsBSONsCkStQI5K6Xoh9UEVujQx1X0fVDVoCAqpYI1qmg7J20FO/PA=="></script>



</body>

</html>
