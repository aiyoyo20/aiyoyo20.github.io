<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="魔法方法介绍 object.iter(self) 此方法在需要为容器创建迭代器时被调用。此方法应该返回一个新的迭代器对象，它能够逐个迭代容器中的所有对象。对于映射，它应该逐个迭代容器中的键。 迭代器对象也需要实现此方法；它们需要返回对象自身。 object.reversed(self) 此方法（如果存在）会被...">
        <meta name="keywords" content="">
        <link rel="icon" href="./images/log.png">
        <!-- Canonical -->
        <link rel="canonical" href="./die-dai-qi.html">
        <!-- /Canonical -->

        <title>迭代器 - Alfalfa</title>

        <!-- Stylesheets -->
        <link href="./theme/css/all.min.css" rel="stylesheet">
        <!-- /Stylesheets -->

        <!-- RSS Feeds -->
        <!-- /RSS Feeds -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->



    </head>

    <body>

        <!-- Header -->
    <div class="header-container gradient">

            <!-- Static navbar -->
            <div class="container">
                <div class="header-nav">
                    <div class="header-logo">
                        <a class="pull-left" href="./"><img class="mr20" src="./images/log.png" alt="logo">Alfalfa</a>
                    </div>
                    <div class="nav pull-right">
                                <a href="./">Homepage</a>
                                <a href="./categories.html">Categories</a>
                    </div>
                </div>
            </div>
            <!-- /Static navbar -->

            <!-- Header -->
    <!-- Header -->
    <div class="container header-wrapper">
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content">
                      <h1 class="header-title">迭代器</h1>
                      <p class="header-date">By <a href="./author/alfalfa.html">Alfalfa</a>, Thu 12 May 2022, modified Thu 12 May 2022, in category <a href="./category/python.html">Python</a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="glyphicon glyphicon-tags mr5" aria-hidden="true"></span>
                      </p>
                  </div>
              </div>
        </div>
    </div>
    <!-- /Header -->
            <!-- /Header -->

        </div>
        <!-- /Header -->


        <!-- Content -->
    <div class="container content">
        <h1>魔法方法介绍</h1>
<ol>
<li>object.<strong>iter</strong>(self)
此方法在需要为容器创建迭代器时被调用。此方法应该返回一个新的迭代器对象，它能够逐个迭代容器中的所有对象。对于映射，它应该逐个迭代容器中的键。</li>
</ol>
<p>迭代器对象也需要实现此方法；它们需要返回对象自身。</p>
<ol>
<li>
<p>object.<strong>reversed</strong>(self)
此方法（如果存在）会被 reversed内置函数调用以实现逆向迭代。它应当返回一个新的以逆序逐个迭代容器内所有对象的迭代器对象。</p>
</li>
<li>
<p>object.<strong>next</strong>()
从容器中返回下一项。 如果已经没有项可返回，则会引发 StopIteration 异常。</p>
</li>
</ol>
<h1>可迭代(Iterable)</h1>
<p>如果一个对象具备有 <strong>iter</strong>()  或者 <strong>getitem</strong>() 其中任何一个魔术方法的话，这个对象就可以称为是可迭代的。
其中，<strong>iter</strong>() 的作用是可以让 for 循环遍历，而 <strong>getitem</strong>()  方法可以让实例对象通过 [index] 索引的方式去访问实例中的元素。所以，List、Tuple、Dictionary、String 等数据类型都是可迭代的。</p>
<h1>迭代器(Iterator)</h1>
<p>如果一个对象同时有__iter__()和__next__()魔术方法的话，这个对象就可以称为是迭代器。
<strong>iter</strong>() 的作用前面我们也提到过，是可以让for循环遍历。而 <strong>next</strong>()方法是让对象可以通过 next(实例对象) 的方式访问下一个元素。
List、Tuple、Dictionary、String 等数据类型虽然是可迭代的，但都不是迭代器，因为他们都没有 next( )方法。</p>
<p>一个迭代器(Iterator)对象不仅可以在 for 循环中使用，还可以通过内置函数 next() 函数进行调用。</p>
<h1>如何判断可迭代(iterable) &amp; 迭代器(iterator)</h1>
<p>借助Python中的isinstance(object, classinfo)函数来判断一个对象是否是一个已知类型。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Iterable</span>  
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Iterator</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;List is &#39;Iterable&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">([],</span> <span class="n">Iterable</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tuple is &#39;Iterable&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">((),</span> <span class="n">Iterable</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dict is &#39;Iterable&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">({},</span> <span class="n">Iterable</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;String is &#39;Iterable&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;List is &#39;Iterator&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">([],</span> <span class="n">Iterator</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tuple is &#39;Iterator&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">((),</span> <span class="n">Iterator</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dict is &#39;Iterator&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">({},</span> <span class="n">Iterator</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;String is &#39;Iterator&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">Iterator</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 输出如下：</span>
<span class="c1"># List is &#39;Iterable&#39;: True</span>
<span class="c1"># Tuple is &#39;Iterable&#39;: True</span>
<span class="c1"># Dict is &#39;Iterable&#39;: True</span>
<span class="c1"># String is &#39;Iterable&#39;: True</span>
<span class="c1"># =========================</span>
<span class="c1"># List is &#39;Iterator&#39;: False</span>
<span class="c1"># Tuple is &#39;Iterator&#39;: False</span>
<span class="c1"># Dict is &#39;Iterator&#39;: False</span>
<span class="c1"># String is &#39;Iterator&#39;: False</span>
</code></pre></div>

<p>通过对定义的分析和比较我们得知：迭代器都是可迭代的（因为迭代器都包含__iter__()函数），但可迭代的不一定是迭代器（因为未必每个可迭代就包含__next__()方法）。</p>
<h1>创建一个迭代器</h1>
<p>所以只要定义了一个类并在类中实现 <strong>iter</strong>() 和 <strong>next</strong>() 方法，那么这个类就可以当做是一个迭代器了。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Iterator</span>

<span class="k">class</span> <span class="nc">Data</span><span class="p">:</span>  
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data is &#39;Iterator&#39;: </span><span class="si">{</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Iterator</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># 输出如下：</span>
<span class="c1"># data is &#39;Iterator&#39;: True</span>
</code></pre></div>

<h1>for 循环本质</h1>
<p>for循环称为迭代器循环，in 后必须是可迭代的对象。</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="nv">i</span> <span class="nv">in</span> <span class="s1">&#39;</span><span class="s">hello</span><span class="s1">&#39;</span>:
    <span class="nv">print</span><span class="ss">(</span><span class="nv">i</span><span class="ss">)</span>
</code></pre></div>

<p>可以看作是：</p>
<div class="highlight"><pre><span></span><code><span class="nv">s</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">hello</span><span class="s1">&#39;</span>
<span class="nv">iter_s</span> <span class="o">=</span> <span class="nv">s</span>.<span class="nv">__iter__</span><span class="ss">()</span>

<span class="k">while</span> <span class="nv">True</span>:
    <span class="nv">try</span>:
        <span class="nv">print</span><span class="ss">(</span><span class="nv">iter_s</span>.<span class="nv">__next__</span><span class="ss">())</span>
    <span class="nv">except</span> <span class="nv">StopIteration</span>:
        <span class="k">break</span>
</code></pre></div>

<p>更好的例子：</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Iterator</span>

<span class="k">class</span> <span class="nc">Data</span><span class="p">:</span>  
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>  
    <span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

<span class="c1"># 输出如下：</span>
<span class="c1"># 1</span>
<span class="c1"># 2</span>
<span class="c1"># 3</span>
<span class="c1"># 4</span>
<span class="c1"># 5</span>
<span class="c1"># 6</span>
<span class="c1"># 7</span>
<span class="c1"># 8</span>
<span class="c1"># 9</span>
<span class="c1"># 10</span>
</code></pre></div>

<p>但是在实际的 for 循环中不会引发异常，for 循环会将异常作为一个中断命令，从而停止循环。</p>
<h1>无限迭代器</h1>
<p>迭代器对象中的项目不必都是可耗尽的，可以是无限迭代器(永远不会结束)。 处理这样的迭代器时一定要小心。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Iterator</span>

<span class="k">class</span> <span class="nc">Data</span><span class="p">:</span>  
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>  
    <span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div>

<p>当迭代这些类型的无限迭代器时，请注意指定终止条件。</p>
<h1>逆向迭代器</h1>
<p>反向迭代仅仅当对象的大小可预先确定或者对象实现了 <strong>reversed</strong>() 的特殊方法时才能生效。</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span>  <span class="n">MyNumbers:</span> 

    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>):
        <span class="nb">self</span>.<span class="n">flag</span>=<span class="nb">True</span>  
        <span class="nb">pass</span>


    <span class="n">def</span> <span class="n">__iter__</span>(<span class="nb">self</span>):
        <span class="nb">self</span>.<span class="n">a</span>=<span class="mi">0</span>
        <span class="k">return</span> <span class="nb">self</span>

    <span class="n">def</span> <span class="n">__reversed__</span>(<span class="nb">self</span>):
        <span class="nb">self</span>.<span class="n">a</span>=<span class="mi">0</span>
        <span class="nb">self</span>.<span class="n">flag</span>=<span class="nb">not</span> <span class="nb">self</span>.<span class="n">flag</span>
        <span class="k">return</span> <span class="nb">self</span>

    <span class="n">def</span> <span class="n">__next__</span>(<span class="nb">self</span>):
        <span class="k">if</span> <span class="nb">self</span>.<span class="n">flag:</span>
           <span class="nb">x</span>=<span class="nb">self</span>.<span class="n">a</span><span class="o">+</span><span class="mi">1</span>
           <span class="k">if</span> <span class="nb">self</span>.<span class="n">a</span><span class="o">&gt;=</span><span class="mi">5</span>:
               <span class="n">raise</span> <span class="n">StopIteration</span>
        <span class="n">else:</span>
           <span class="nb">x</span>=<span class="mi">5</span><span class="o">-</span><span class="n">self</span>.<span class="n">a</span>
           <span class="k">if</span> <span class="nb">self</span>.<span class="n">a</span><span class="o">&gt;=</span><span class="mi">5</span>:
               <span class="n">raise</span> <span class="n">StopIteration</span>
        <span class="nb">self</span>.<span class="n">a</span>+=<span class="mi">1</span>       
        <span class="k">return</span> <span class="nb">x</span>   


<span class="n">myclass</span> = <span class="n">MyNumbers</span>()  
<span class="n">myiter</span> = <span class="n">iter</span>(<span class="n">myclass</span>)  
<span class="nb">print</span>(<span class="s">&#39;iter-next&#39;</span>)
<span class="k">for</span>  <span class="nb">x</span>  <span class="nb">in</span>  <span class="n">myiter:</span> 
    <span class="nb">print</span>(<span class="nb">x</span>)

<span class="nb">print</span>(<span class="s">&#39;reversed-next&#39;</span>)
<span class="n">myrv</span>=<span class="n">reversed</span>(<span class="n">myclass</span>)

<span class="nb">print</span>(<span class="nb">next</span>(<span class="n">myrv</span>))
<span class="nb">print</span>(<span class="nb">next</span>(<span class="n">myrv</span>))
<span class="nb">print</span>(<span class="nb">next</span>(<span class="n">myrv</span>))
<span class="nb">print</span>(<span class="nb">next</span>(<span class="n">myrv</span>))
<span class="nb">print</span>(<span class="nb">next</span>(<span class="n">myrv</span>))

<span class="nb">print</span>(<span class="s">&#39;reversed-reversed&#39;</span>)
<span class="n">myrv</span>=<span class="n">reversed</span>(<span class="n">myclass</span>)
<span class="k">for</span> <span class="n">i</span> <span class="nb">in</span> <span class="n">myrv:</span>
    <span class="nb">print</span>(<span class="n">i</span>)
</code></pre></div>

<p>本例中直接实现了iter和reversed 两种方法。主要设置一个标志位，通过__reversed__改变标志位来设置是正序输出还是反序输出，通过多次调用reversed可以进行反转。</p>
<h1>可迭代对象转迭代器对象</h1>
<p>List、Tuple、Dictionary、String 等数据类型虽然是可迭代的，但都不是迭代器。
通过 iter() 方法可以将其转为迭代器对象。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>  
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterator</span>

<span class="n">list_one</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">list_one</span><span class="p">,</span><span class="n">Iterable</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">list_one</span><span class="p">,</span><span class="n">Iterator</span><span class="p">))</span>
<span class="n">it_list</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">list_one</span><span class="p">)</span>
<span class="n">itr_list</span> <span class="o">=</span> <span class="n">list_one</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">it_list</span><span class="p">,</span><span class="n">Iterable</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">it_list</span><span class="p">,</span><span class="n">Iterator</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">itr_list</span><span class="p">,</span><span class="n">Iterable</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">itr_list</span><span class="p">,</span><span class="n">Iterator</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">it_list</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">it_list</span><span class="o">.</span><span class="fm">__next__</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">itr_list</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">itr_list</span><span class="o">.</span><span class="fm">__next__</span><span class="p">())</span>

<span class="c1"># True</span>
<span class="c1"># False</span>
<span class="c1"># True</span>
<span class="c1"># True</span>
<span class="c1"># True</span>
<span class="c1"># True</span>
<span class="c1"># 1</span>
<span class="c1"># 2</span>
<span class="c1"># 1</span>
<span class="c1"># 2</span>
</code></pre></div>

<p>iter(obj)      等同于 obj.<strong>iter</strong>()
next(obje)  等同于 obje.<strong>next</strong>()</p>
<h1>迭代器优缺点：</h1>
<ul>
<li>优点：迭代器对象表示的是一个数据流，可以在需要时才去调用next来获取一个值；因而本身在内存中始终只保留一个值，对于内存占用小可以存放无限数据流。优于其他容器需要一次将所有元素都存放进内存，如：列表、集合、字典...等</li>
<li>缺点：1.无法获取存放的元素长度，除非取完计数。2.只能向后取值，next()永远返回的是下一个值。取值不灵活，无法取出指定值(无法像字典的key,或列表的下标)，而且迭代器的生命周期是一次性的元素被迭代完则生命周期结束</li>
</ul>
<h1>生成对象为迭代器的函数</h1>
<p>enumerate() 、zip()、map()、filter() 生成的对象都为迭代器</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterator</span>

<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>

<span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">en</span> <span class="o">=</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">en</span><span class="p">,</span><span class="n">Iterator</span><span class="p">))</span>

<span class="n">zi</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span><span class="n">list2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">zi</span><span class="p">,</span><span class="n">Iterator</span><span class="p">))</span>

<span class="n">ma</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">add</span><span class="p">,</span><span class="n">list1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">ma</span><span class="p">,</span><span class="n">Iterator</span><span class="p">))</span>

<span class="n">fi</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">,</span><span class="n">list1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fi</span><span class="p">,</span><span class="n">Iterator</span><span class="p">))</span>

<span class="c1"># Ture</span>
<span class="c1"># Ture</span>
<span class="c1"># Ture</span>
<span class="c1"># Ture</span>
</code></pre></div>

<h2>zip()  ： 同时迭代多个序列</h2>
<p>同时迭代多个序列，每次分别从一个序列中取一个元素。
zip(a, b) 会生成一个可返回元组 (x, y) 的迭代器，其中x来自a，y来自b。 一旦其中某个序列到底结尾，迭代宣告结束。 因此迭代长度跟参数中最短序列长度一致。</p>
<div class="highlight"><pre><span></span><code><span class="nv">a</span> <span class="o">=</span> [<span class="mi">1</span>, <span class="mi">2</span>, <span class="mi">3</span>]
<span class="nv">b</span> <span class="o">=</span> [<span class="s1">&#39;</span><span class="s">w</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">x</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">y</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">z</span><span class="s1">&#39;</span>]
<span class="k">for</span> <span class="nv">i</span> <span class="nv">in</span> <span class="nv">zip</span><span class="ss">(</span><span class="nv">a</span>,<span class="nv">b</span><span class="ss">)</span>:
...     <span class="nv">print</span><span class="ss">(</span><span class="nv">i</span><span class="ss">)</span>
...
# <span class="ss">(</span><span class="mi">1</span>, <span class="s1">&#39;</span><span class="s">w</span><span class="s1">&#39;</span><span class="ss">)</span>
# <span class="ss">(</span><span class="mi">2</span>, <span class="s1">&#39;</span><span class="s">x</span><span class="s1">&#39;</span><span class="ss">)</span>
# <span class="ss">(</span><span class="mi">3</span>, <span class="s1">&#39;</span><span class="s">y</span><span class="s1">&#39;</span><span class="ss">)</span>
</code></pre></div>

<p>拓展：如果希望得到的是最长序列，即没有值可以自动添加默认值的可以考虑使用 itertools.zip_longest() 函数来代替。</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="nv">i</span> <span class="nv">in</span> <span class="nv">zip_longest</span><span class="ss">(</span><span class="nv">a</span>, <span class="nv">b</span>, <span class="nv">fillvalue</span><span class="o">=</span><span class="mi">0</span><span class="ss">)</span>:
    <span class="nv">print</span><span class="ss">(</span><span class="nv">i</span><span class="ss">)</span>
...
# <span class="ss">(</span><span class="mi">1</span>, <span class="s1">&#39;</span><span class="s">w</span><span class="s1">&#39;</span><span class="ss">)</span>
# <span class="ss">(</span><span class="mi">2</span>, <span class="s1">&#39;</span><span class="s">x</span><span class="s1">&#39;</span><span class="ss">)</span>
# <span class="ss">(</span><span class="mi">3</span>, <span class="s1">&#39;</span><span class="s">y</span><span class="s1">&#39;</span><span class="ss">)</span>
# <span class="ss">(</span><span class="mi">0</span>, <span class="s1">&#39;</span><span class="s">z</span><span class="s1">&#39;</span><span class="ss">)</span>
</code></pre></div>

<p>fillvalue 的值没有会默认为 None。</p>
<h2>enumerate() ：序列上索引值迭代</h2>
<p>迭代一个序列的同时跟踪正在被处理的元素索引。
为了按传统行号输出(行号从1开始)，你可以传递一个开始参数（默认从0开始）：</p>
<div class="highlight"><pre><span></span><code><span class="n">my_list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="w"></span>
<span class="k">for</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">enumerate</span><span class="p">(</span><span class="n">my_list</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">):</span><span class="w"></span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">)</span><span class="w"></span>
<span class="o">...</span><span class="w"></span>
<span class="c1"># 1 a</span><span class="w"></span>
<span class="c1"># 2 b</span><span class="w"></span>
<span class="c1"># 3 c</span><span class="w"></span>
</code></pre></div>

<p>enumerate() 函数返回的是一个 enumerate 对象实例， 它是一个迭代器，返回连续的包含一个计数和一个值的元组， 元组中的值通过在传入序列上调用 next() 返回。</p>
<p><a href="http://anders.wang/python-iterable-iterator/">Python中的迭代器与可迭代</a>
<a href="https://zhuanlan.zhihu.com/p/350948181">Python迭代器和反转迭代器的一点思考</a>
<a href="https://www.yiibai.com/python/iterator.html">Python迭代器</a>
<a href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c04/p11_iterate_over_multiple_sequences_simultaneously.html">python3-cookbook</a></p>


        
    </div>
        <!-- /Content --> 

        <!-- Footer -->
        <div class="footer gradient-2">
            <div class="container footer-container ">
                <div class="row">
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Sitemap</div>
                        <ul class="list-unstyled">
                            <li><a href="./archives.html">Archives</a></li>
                            <li><a href="./tags.html">Tags</a></li>
                            <li><a href="./authors.html">Authors</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Social</div>
                        <ul class="list-unstyled">
                            <li><a href="#" target="_blank">github</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Links</div>
                        <ul class="list-unstyled">
                            <li><a href="#" target="_blank">github</a></li>
                        </ul>
                    </div> 
                    <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                        <p class="pull-right text-right">
                            <small><em>Proudly powered by <a href="http://docs.getpelican.com/" target="_blank">pelican</a></em></small><br/>
                            <small><em>Theme and code by <a href="https://github.com/molivier" target="_blank">molivier</a></em></small><br/>
                            <small>&copy; blogname 2015</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Footer -->
    </body>
</html>